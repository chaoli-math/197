\section{射影概形的不变量}\label{s:3.3}

在本节中，我们假设$K$是一个域，并且只在$K$-概形上工作，
除非明确提及相反的情况。

假设给定了射影空间中的一个概形，我们如何找到它的不变量？
最简单的想法是问：有多少独立的$d$-次形式在上面为零？
将对不同的$d$的答案放在一起，我们得到了以前被称为概形的假设
的东西（可能是因为当时人们对这些数给定的概形感兴趣）。 
现在，通常以等效形式的Hilbert函数来讨论这些信息。
我们将在这里讨论Hilbert函数方法的几种变体，
这些变体产生了一大类不变量。有些生成的不变量实际上
仅依赖于抽象概形，而不依赖于给定的射影嵌入，而其他的不变量则
依赖于嵌入; 所以我们将一路评注这些事情。我们采用的思路 % p.125
就是最初Hilbert [1890]使用的，而不是更被广为采用Samuel的
（比如可见Hartshorne [1977, Chapter I]）。 Hilbert的方法
要求稍多一些的技巧但是能给出一个更强且更易理解的结果。

我们从定义基本的不变量开始。在这章的最后部分，我们将展示
一些简单的几何示例，说明不变量包含哪些信息。

\subsection{Hilbert函数与Hilbert多项式}\label{s:3.3.1}

首先，假设我们给定了一个闭子概形$X\subset \mathbb P^r_K$，
其由一个饱和理想$I=I(X)\subset S=K[x_0,\dots,x_r]$描述，
如Example \ref{exe:3.14}所定义的那样。假设，齐次多项式
$F_1$, $\dots$, $F_n$生成了$I$. 记$R=S/I(X)$是$X$的齐次
坐标环，再记$R_\nu$是$R$的$\nu$-次齐次分量。

这里基础的想法是对应$X\subset \mathbb P^r_K$给一个函数
\[
	H(X,\cdot):\mathbb N\to \mathbb N,
\]
它被称为$X$的\textit{Hilbert函数}，由
\[
	H(X,\nu)=\dim_K R_\nu
\]
定义。更一般地，如果$M$是任意的有限生成分次$S$-模，我们
定义它的Hilbert函数为$H(M,\nu):=\dim_K M_\nu$. 下面是基本的
结论。

\begin{thm}[Hilbert]\label{thm:3.55}
存在唯一的$\nu$的多项式$P(X,\nu)$使得$H(X,\nu)=P(X,\nu)$对
所有足够大的$\nu$都成立。更一般地，对任意的有限生成分次$S$-模
$M$，存在一个唯一的多项式$P(M,\nu)$使得$H(M,\nu)=P(M,\nu)$对
所有足够大的$\nu$都成立。
\end{thm}

我们将在下面指出如何证明这一点（沿着Hilbert最初的证明
[1890]的思路）。

多项式$P(X,\nu)$称作$X$的\textit{Hilbert多项式}。就像在经典簇
中一样，它携带了概形$X$的基础信息。比方说，我们将看到它的次数
就是$X$的维数，当$X$是零维时，它的（常数）值就是$X$的度。
更一般地，我们定义$K$上的射影空间的任意$n$-维子概形$X$
的度为$n!$乘以$X$的Hilbert多项式的首项系数；这允许我们将经典的
簇的度推广到更大一类子概形$X\subset \mathbb P^r_K$上。

\subsection{平坦性 II：射影概形族的极限}\label{s:3.3.2}

Hilbert多项式的另一意义在于它给了我们平坦这个概念的几何解释。

% p.126

\begin{pro}\label{pro:3.56}
在约态连通基$B$上的射影空间的闭子概形族
$\mathscr X\subset \mathbb P_B^r$是平坦的当且仅当其所有纤维
具有相同的Hilbert多项式。
\end{pro}

一般情况的证明将把我们扯得太远，但是这个结论在
$B=\spec K[t]_{(t)}$时是简单的。

\begin{proof}[{当$B=\spec K\lbrack t\rbrack_{(t)}$时的证明}]
闭子概形$X\subset \mathbb P_K^r\times B$由
\[
	K[t]_{(t)}[x_0,\dots,x_r]
\]
中的理想$I$给出，且$I$对于$x_0$, $\dots$, $x_r$是齐次的。
因此齐次坐标环
\[
	R=K[t]_{(t)}[x_0,\dots,x_r]/I
\]
的每个分次部分都是一个$K[t]_{(t)}$-模。

我们已经知道，族$X\to B$是平坦的当且仅当每个局部环$\oo_{X,x}$
是$K[t]_{(t)}$-无挠的。这等价于说，如果我们让任意$x_i$是可逆的%
\footnote{译者注：这里意思应该是形式可逆，即考虑局部化}%
，则$R$的挠子模将趋于零。于是，挠子模乘上理想
$(x_0,\dots,x_r)$的某个幂为零，而因此只与$R$的有限个分次部分
相交。但是如果$R_\nu$是$R$的一个分次部分，从$K[t]_{(t)}$是一个
主理想环以及$R_\nu$是一个有限生成$K[t]_{(t)}$-模，$R_\nu$是
无挠的当且仅当它是自由的。此外，$R_\nu$是自由的，如果他需要的
生成元个数，从Nakayama引理为
\[
	\dim_K R_\nu \otimes_{K[t]_{(t)}}K
\]
应该等于它的秩
\[
	\dim_{K(t)}R_\nu  \otimes_{K[t]_{(t)}}K(t),
\]
即，当且仅当$H(X_{(0)},\nu)$的值等于$H(X_{(t)},\nu)$的值，其中
$X_{(0)}$和$X_{(t)}$是族$X$在$B$的两个点$(0)$和$(t)$处的纤维。
（同时，Hilbert函数是常数当且仅当仿射锥族$\spec R$在$B$上是
平坦的。）
\end{proof}

这个命题告诉我们，射影概形的闭子概形的平坦族表现得比一般的
平坦族要好。比如，尽管一个仿射概形的非空子概形族的平坦极限
可能是空的，但这命题告诉我们，射影空间的子概形族的平坦极限
不会这样。这点连同单参闭子概形族平坦极限的存在和唯一性（
第 \ref{s:2.3.4} 节和第 \ref{s:2.3.5} 节），给出了一种证明
射影概形是逆紧的思路，使用所谓的“赋值判别法”。所有这些，
可见，比如，Hartshorne [1977, Chap. II].

当然，$H(X,\nu)$比$P(X,\nu)$包含了更多信息，似乎$P(X,\nu)$
作为一个只有有限个系数的多项式，比起整个Hilbert函数更容易 % p.127
操作。但实际上，使用二项式系数，Hilbert函数也有一个有限的
表达式。为看到这点，我们将引入一组更好的不变量，\textit{
$R$的自由分解的分次Betti数}，使用它，Hilbert函数和Hilbert
多项式都可以被改写为更方便的形式。（Hilbert多项式比起
Hilbert函数真正的优点是它包含的信息依赖于稍少一些 ---
下面我们会详细阐述 --- 的$X$的嵌入细节。）

\subsection{自由分解}\label{s:3.3.3}

我们将记$S(-b)$为具有次数为$b$的生成元的秩为$1$的分次自由模；
这里显然不幸的符号选取由更方便和容易记忆的公式
\[
	S(-b)_\nu =S_{\nu-b}
\]
所补偿。我们能用分次自由模来分解$R$，或实际上任意的分次$S$-模，
这里分次自由模是形如$S(-b)$的模的拷贝的直和。Here is how. \nottran

假设$F_1$, $\dots$, $F_n$是$M$的齐次生成元的极小集，我们将记
$b_{0j}$为$F_j$的次数。定义一个满射
\[
	\varphi_0:E_0:=\bigoplus_{j=1}^n S(-b_{0j})\to M
\]
通过将$S(-b_{0j})$的生成元映射到$F_j\in M$. 令$M^{(1)}$为
$\varphi_0$的核。如果$M^{(0)}$非零，我们可以用$M^{(1)}$代替
$M$（它应被叫做$M^{(0)}$）重复操作；选一个$E_0$的极小齐次元组
$e^{(1)}_i$生成了$M^{(1)}$，$e^{(1)}_i$的次数为$b_{1i}$，我们
将一个生成元次数分别为$b_{1i}$的分次自由模映射到$M_1$，通过
\[
	\varphi_1:E_1:=\bigoplus_{j=1}^n S(-b_{1j})\to E_0
\]
将$E_1$的第$i$个生成元映射到$e_i^{(1)}$. 继续这样做下去，我们
得到了一个分解
\[
	E:\cdots \longrightarrow E_i 
	\xrightarrow{\,\,\varphi_i\,\,} E_{i-1}
	\longrightarrow \cdots  \xrightarrow{\,\,\varphi_1\,\,}
	E_0,
\]
其中
\[
	E_{i}=\bigoplus_j S(-b_{ij}).
\]
当然，这个过程在某个$\varphi_i$为单射时候就停止了，Hilbert的
重要发现即，如果$S$是多项式环，这总是会发生的。

% p.128

\begin{thm}[Hilbert合冲定理]
令$S=K[x_0,\dots,x_r]$. 在上面的任意极小自由分解中，对某个
$i\leq r+1$，即某个小于变量个数的数，$\varphi_i$是一个单射，
特别地，任意分次$S$-模有一个有限、分次、自由分解。
\end{thm}

这里我们将不证明这点，见Hilbert [1890]，或更现代的陈述，Eisenbud
[1995, Section 1.10, Chap. 19]或Matsumura [1986, Theorem 19.5].
合冲定理让我们可以证明Theorem \ref{thm:3.55}.

\begin{proof}[{Theorem \ref{thm:3.55}的证明}]
模$S(-b)$的Hilbert方程是容易写出的。因为
\[
	S(-b)_\nu=S_{\nu-b}
\]
有一个基包含所有的次数为$\nu-b$的$r+1$变量首一多项式，所以
\[
	H(S(-b),\nu)=\binom{r+\nu-b}r,
\]
其中二项式系数当下面的数大于上面的时候为零。对$\nu\geq b-r$
时候，它与多项式
\[
	P(S(-b),\nu)=\frac{(r+\nu-b)(r+\nu-b-1)\cdots (\nu-b)}
	{r(r-1)\cdots 1}
\]
相同，所以我们看到$H(X,\nu)$对大$\nu$来说是一个多项式。

作为$S$-模，从$M$的一个有限、自由分解
\[
	E:0 \longrightarrow E_{r+1} 
	\xrightarrow{\varphi_{r+1}}E_{i}
	\longrightarrow \cdots  \longrightarrow E_1 
	\longrightarrow M \longrightarrow 0,
\]
其中
\[
	E_i=\bigoplus_j S(-b_{ij}).
\]
我们看到，$M$的Hilbert函数可以被写为
\[
	H(M,\nu)=\sum_{i=0}^r (-1)^i H(E_i,\nu)
	=\sum_{i=0}^r(-1)^i\sum_j H(S(-b_{ij}),\nu)
\]
的形式。因为我们已经说明了，每个$H(S(-b_{ij}),\nu)$
对大$\nu$是一个多项式，所以$H(M,\nu)$对大$\nu$也是多项式，
这就是我们需要的。Theorem \ref{thm:3.55}得证。
\end{proof}

\subsection{例子}\label{s:3.3.4}

\subsection{B\'{e}zout定理}\label{s:3.3.5}

\subsection{Hilbert级数}\label{s:3.3.6}