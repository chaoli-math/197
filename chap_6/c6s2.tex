\section{用点函子刻画空间}\label{s:6.2}

描述一个有趣概形的点函子比起给出它的一个直接构造，不管是黏出来的还是
在仿射或射影空间中由方程显示给出来的，往往更容易且有时更有启发性。
典型的例子来自于Hilbert概形和其他模（moduli）问题，那里我们想要一个
自然的空间，其点表示了一些几何对象。但是，在讨论远简单的对象时，
这个观点同样有用，比如说纤维积或者射影空间本身。

在任何情况中，基本的想法是首先确定一个从概形范畴到集合范畴的函子，
然后证明一个存在性定理表明存在一个概形使得这个函子是点函子。当然，
为使这个程序可行，一个必要的组成部分的是一个局部（且容易检验的）判据
来证明这个函子可表，下面我们给出这样一个判据。

\subsection{概形间函子的刻画}\label{s:6.2.1}

为定义或构造首先作为函子的概形，我们遇到了一个基本的问题，即确定什么
时候一个函子是来自于一个概形。这里有一个刻画。

我们称$F:(\text{rings})\to (\text{sets})$是一个\textit{Zariski拓扑
上的层}，如果对任意的环$R$和$X=\spec R$的任意基本开集的开覆盖
$U_i=\spec R_{f_i}$，函子$F$满足开覆盖$\bigcup U_i=X$的层公理。
即，对任意一族元素$\alpha_i\in F(R_{f_i})$，$\alpha_i$和$\alpha_j$
都映射到$F(R_{f_if_j})$中的相同元素，则存在唯一的$\alpha\in F(R)$使得
它映射到每个$F(R_{f_i})$中为$\alpha_i$.

在实操中，这是一个相当容易检验的性质。实际上，这也足够保证$F$来自于
一个概形，若我们已经知道$F$在如下意义下被仿射概形所覆盖。
读者可以证明如下定理。

\begin{thm}\label{thm:6.14}
函子$F:(\textrm{ring})\to (\textrm{sets})$具有形式$h_Y$，其中$Y$是一个
概形，当且仅当
\begin{compactenum}[(1)]
\item $F$是Zariski拓扑下的层，以及
\item 存在环$R_i$以及开子函子
\[
    \alpha_i:h_{R_i}\to F
\]
使得，对任意的域$K$，$F(K)$是$h_{R_i}(K)$在映射$\alpha_i$下的像的并。
\end{compactenum}
\end{thm}

% p.260

一个简单的应用，我们可以用这个定理来证明纤维积的存在性。在概形范畴中
纤维积的构造，其已在第 \ref{chap:1} 章中阐述，是具有基本性意义的，
但这同时出乎意料地笨拙。使用函子的视角，我们至少可以通过给出其点函子
来描述两个概形的纤维积。若$X\to S$和$Y\to S$是两个概形间的态射，纤维积
$X\times_S Y$可以确定为其点函子为函子的纤维积$h_X\times_{h_S} h_Y$
的概形。而存在性建立于如下习题。

\begin{exe}\label{exe:6.15}
\begin{compactenum}[(a)]
\item 证明，若$f:A\to C$和$g:B\to C$是函子同态，且函子都是Zariski拓扑
    上的层，则纤维积$A\times_C B$也是Zariski拓扑上的层。
\item 用第 \ref{chap:1} 章中所建议的纤维积的开覆盖以及上面的定理来证明
    概形范畴中纤维积的存在性。
\end{compactenum}
\end{exe}

下面的例子给出了到射影空间的映射的另一种看法。Theorem \ref{thm:3.37}
可以直接翻译为我们的新语言：

\begin{thm}\label{thm:6.16}
若$Y=\mathbb P_{\mathbb Z}^n$，则
\begin{align*}
h_Y(X)=&
\;\{\text{局部为秩$n$直和项的局部自由子层$\mathscr F\subset 
\mathscr O_X^{n+1}$}\}\\
=&\; \frac{\{\text{$X$上的可逆层$P$，连同一个满态射$\mathscr O_X^{n+1}
\to P$}\}}{\{\text{同构}\}},
\end{align*}
其中同构定义同Corollary \ref{coro:3.42} 中那样。
\end{thm}

作为应用，我们将到射影空间的映射的这个描述与在第 \ref{s:6.1.3} 节描述
的作为$\spec K[\varepsilon]/(\varepsilon^2)$到$X$的映射的$X$上的切矢量
相结合，来计算$\mathbb P_K^n$在$K$-值点上的Zariksi切空间。由我们曾曰，
一个$\mathbb P_K^n$的$K$-值点是一个秩$n$的直和项$F\subset K^{n+1}$，
令$L$是商$L=K^{n+1}/F$. 在这个点的切空间$T$就是所有直和项$F'\subset 
(K[\varepsilon]/(\varepsilon)^2)^{n+1}$，它们模掉$\varepsilon$后是$F$.
我们断言，存在一个自然同构
\[
T\cong \Hom_K(F,L).   
\]
为得之，选一个分解$K^{n+1}=F\oplus L$，一个$F$的一组基$e_i$. 
任何$(K[\varepsilon]/(\varepsilon)^2)^{n+1}$的直和项$F'$模掉
$\varepsilon$后可以得到$F$，有一组基形如
$\{e_i+\varepsilon s_i+\varepsilon t_i\}$，其中$s_i\in F$, $t_i\in L$.
我们对$K'$定义一个映射$\alpha:F\to L$将$e_i$映为$t_i$. 反之，给定任意
映射$\alpha$，我们可以定义$F'$为由元素$e_i+\varepsilon\alpha(e_i)$
张成的模。

\begin{exe}\label{exe:6.17}
证明这些定义都不依赖于选取。
\end{exe}

最后，Theorem \ref{thm:6.14} 同样可用来从函子描述证明 Grassmannian
概形的存在性。

% p.261
\begin{exe}\label{exe:6.18}
对$0<k<n$，令
\[
g=g(k,n):(\text{rings})\to (\text{sets})    
\]
为Grassmannian函子，即，由
\[
    g(T)=\{\text{$T^n$的秩$k$直和项}\}
\]
给出的函子。证明这是射影空间$\mathbb P_{\mathbb Z}^r$的闭子概形
$G_{\mathbb Z}(k,n)$的点函子，如下。

首先，令$r= {n \choose k}-1$，令$\mathbb P_{\mathbb Z}^r
=\proj \mathbb Z[\dots X_I \dots]$为齐次坐标为$X_I$的射影空间，指标
对应为$\{1,2,\dots,n\}$的长度为$n-k$的子集。通过将直和项$M\subset T^n$
映到$\bigwedge^k M\subset \bigwedge^k T^n$定义一个自然变换
$g\to h_{\mathbb P_{\mathbb Z}^r}$. 用寻常的仿射开子概形
$U_I\cong \mathbb A_{\mathbb Z}^r$来覆盖$\mathbb P_{\mathbb Z}^r$，
证明这些子概形有下面的子函子来表示
\[
    U_I(T)=\{\text{$T^{r+1}$的秩$r$直和项使得$T^{r+1}$的第$I$个基矢量
    生成了余核}\},
\]
以及$U_I$和$g$的交（纤维积）为函子
\[
    (U_I\cap g)(T)=\{\text{$T^{n}$的秩$r$直和项$M$使得$T^{n}$的基矢量
    $e_{i_1},\dots,e_{i_{n-k}}$生成了余核}\}.
\]
验证交$U_I\cap g$可以由一个仿射概形表示。证明$g$是Zariski拓扑上的层，
然后推出$g$由一个概形所表示。
\end{exe}

此外，注意到我们并没有$g(T)=\bigcup (U_I\cap g)(T)$，除了在局部环上。

\begin{exe}\label{exe:6.19}
证明，这样给出的Grassmannian的定义与之前在第 \ref{s:3.2.7} 节给出的
定义相同。
\end{exe}

\begin{exe}\label{exe:6.20}
    对一个域$K$，给出Grassmannnian $G_K(k,n)$类似的定义，然后证明
    这与积$G_{\mathbb Z}(k,n)\times \spec K$相同。
\end{exe}

我们将在下节中看到这个定理的其他应用。函子观点在Damazure\& Grabriel
[1970]中有被深入细致发展，感兴趣的读者可以参考。

Grothendieck在概形上的工作的一个主要目标是通过不强且一般的性质，它们
常容易被验证，来找到一个概形函子的刻画，然后推出许多代数几何中的
存在性定理（就像同伦范畴中的Brown定理，见Spanier [1966, Chapter 7.7]）。
一开始，这个程序似乎看上去完全失败了，概形函子确实非常特殊，
比如见Hironaka [1962]. 然而，Artin发现了一个意想不到的近似定理，其表明%
% p.262
了有一个仅仅比概形函子范畴“大一点”的函子$\mathscr F$的范畴，它可以被
不强且一般的性质所刻画。几何地，函子$\mathscr F$就像将仿射概形
通过“\'etale等价关系”分开然后黏起来得到的空间。他将其叫做
\emph{代数空间}（一个它们会出现的典型场景，见第 \ref{s:6.2.4} 节）。
细节可见Artin [1971]和Knutson [1971].

\subsection{参数空间}\label{s:6.2.2}

\paragraph*{Hilbert概形}
\addcontentsline{toc}{subsubsection}{Hilbert概形}

点函子的概念产生最大影响的一个领域可能是参数空间的构成和描述。我们已经
在第 \ref{s:3.3.3} 节看到，比如，域$K$上射影空间的具有给定Hilbert多项
式$P$的子概形构成一个概形，我们将其叫做$\mathscr H_P$. 这样一个命题并
没有歧异看上去是有点惊奇的。尽管这些对象的\emph{集合}可能构成一个簇的
一些点是符合直觉的，难道它们不能以不同的方式构成簇吗？那它们又以
什么意义构成一个概形？

答案将通过明确我们希望子概形集合与$\mathscr H_P$的点的集合之间的对应关
系的性质而获得。具体地，注意到如果$\mathscr X\subset \mathbb P_K^n
\times B\to B$是任意$\mathbb P_K^n$的平坦子概形族，具有Hilbert多项式
$P$，我们得到了一个从$B$剩余类域为$K$的点的集合到$\mathscr H_P$的点的
集合的映射，其将$b\in B$映射到$\mathscr H_P$中对应%
\footnote{译者注：原文是``..., sending a point 
$b\in B$ to the point of $\mathscr H_P$ corresponding to the fiber
$X_b$ of $\mathscr H_P$ over $b$.'' 这里第二个$\mathscr H_P$应该是一个
笔误，实为$\mathscr X$.}%
$\mathscr X$在$b$处的纤维$X_b$的点。
自然，我们会问，这个映射是否来自于一个正则映射$B\to \mathscr H_P$？
再进一小步，我们希望$\mathscr H_P$具有如下性质，对任意$K$上的概形$B$，
由$B$所参数化的具有Hilbert多项式$P$的$\mathbb P_K^n$的平坦子概形族的
集合，可以自然等同于所有从$B$到$\mathscr H_P$的映射的集合。最后，因为
如何参数化具有给定Hilbert多项式的$\mathbb P_K^n$的子概形族的问题某种
程度上对所有$K$都相同，我们想要在$\spec \mathbb Z$上做这件事，即
（就在像Grassmannian的情况中那样，实际上这是一个Hilbert概形的特殊情况）
对每个$P$在$\spec \mathbb Z$上定义一个对象$\mathscr H_P$使得对任意的
$K$，积$\mathscr H_P\times \spec K$参数化了$\mathbb P_K^n$的具有Hilbert
多项式$P$的子概形族。

稍微说得不一样些，我们定义：

\begin{defi}\label{defi:6.21}
\emph{Hilbert函子}$h_P$，叫做“具有Hilbert多项式$P$的
$\mathbb P_{\mathbb Z}^n$中的概形平坦族的函子”，为函子
\[
    h_P:(\text{scheme})^\circ \to (\text{sets}),
\]
其对任意$B$给出了一个在$B$上平坦的子概形$\mathscr X\subset \mathbb P_B^n$
的集合，其在$B$上的点处的纤维具有Hilbert多项式$P$.
\end{defi}

我们接着想要取Hilbert概形$\mathscr H_P$为表示了$h_P$的概形：换句话说，
点函子为$h_P$的概形。由Yoneda引理 \eqref{lem:6.1}，这确定了概形
$\mathscr H_P$，如果其存在，因此核心定理如下：

% p.263

\begin{thm}\label{thm:6.22}
存在一个概形$\mathscr H_P$，其点函子为函子$h_P$.
\end{thm}

注意到，对任意概形$S$，我们可以在$S$-概形范畴类似定义函子
$h_{P,S}:(\text{$S$-schemes})^\circ \to (\text{sets})$，且如果
$\mathscr H_P$为表示了上面函子$h_P$的概形，则$h_{P,S}$是由$S$-概形
$\mathscr H_P\times S$所表的函子。

实际上，$\mathscr H_P\times \spec K$确实经常是一个概形，但\emph{并不是}
一个簇。我们将从 Exercise \ref{exe:6.35} 到 \ref{exe:6.37} 描述
Mumford [1962]的一个Hilbert概形的经典例子，其甚至在对应非奇异不可约
射影簇的点处都是非约态的。

Theorem \ref{thm:6.22} 有另一个经常用的诠释：称函子$h_P$可表等价于说
存在一个\emph{万有族}，即一个概形$\mathscr H$和一个在$\mathscr H$上平坦
的、具有Hilbert多项式$P$的子概形$\mathscr X\subset \mathbb 
P_{\mathbb Z}^n\times \mathscr H$，使得任意在$B$上平坦的具有Hilbert
多项式$P$的子概形$Y\subset \mathbb P_{\mathbb Z}^n\times B$等于
$Y=\mathscr X\times_{\mathscr H}B\subset \mathbb P_{\mathbb Z}^n\times B$
和一个唯一的态射$B\to \mathscr H$的纤维积。显然，如果一个万有族
$\mathscr X\subset \mathbb P_{\mathbb Z}^n\times \mathscr H$存在，
则$\mathscr H$表示了函子$h_P$. 反过来，如果一个概形$\mathscr H$表示了
$h_P$，则对应于恒等映射的
子概形$\mathscr X\subset \mathbb P_{\mathbb Z}^n \times \mathscr H$
为上面意义下的万有族。

我们将不会给出Theorem \ref{thm:6.22} 的证明，但是会指出如何处理，
更多的细节我们推荐读者去读Mumford [1966] 或者 Koll\'ar [1996].

想法是容易总结的：首先约化到射影空间$\mathbb P_B^n$的子概形$X$
的情况，这里基具有形式$B=\spec R$，而$R$是一个局部环。这样一个概形
$X$由其理想$I(X)\subset S=R[X_0,\dots,X_n]$确定，于是对足够大的$m$
（某种程度上仅依赖$P$），其被其次数为$m$的分量$I(X)_m\subset S_m$
确定。置$M={{m+n}\choose n}$和$q=P(m)$，它们对应了Grassmannian
$G_B(q,M)$中的一个点，这个Grassmannian参数了自由$R$-模$S_m\cong R^M$
中余维数为$P(m)$的直和项。这样，$\mathscr H_{P,B}$变成了这样平面的
Grassmannian $G_B(q,M)$的一个子概形。

关键在于，我们可以选一个统一的$m$使得对Hilbert多项式为$P$的任意子概形
$X$都有如下性质成立：存在一个$m_0$使得$m\geq m_0$且$X$是$\mathbb P_K^n$
的Hilbert多项式为$P$的子概形时，$I(X)_{l\geq m}$是由$I(X)_m$所生成的，
且$I(X)_m$在$S_m$里的余维数为$P_X(m)$. 审查我们的证明，
因为Hilbet多项式是一个多项式，我们看到只要证明
$I(X)$的极小自由分解中的自由模的生成元的次数可以被$X$的Hilbert多项式
所限制就够了。这由$X$的\emph{Castelnuovo正规化}所完成，更加完整的描述
将带我们离开太远。

% p.264

因此，对任意的基$B=\spec R$上的平坦族$\mathscr X\subset \mathbb P_B^n$，
即一个$h_P(\spec R)$中的元素，我们有一个$R^M$中余维数为$q$的直和项，即
一个$g(q,M)(R)$中的元素，其中$g=g(q,M)$是在Exercise \ref{exe:6.18} 中
所定义的Grassmannian函子。这个对应可以推广为一个从$h_P^*$到$g(q,M)$的
自然变换，其中$h_P^*:(\text{rings})\to (\text{sets})$为函子$h_P^*=
h_P(\spec R)$，于是也推广为一个从Hilbert函子$h_P$到由Grassmannian
$G=G_{\mathbb Z}(q,M)$所表的函子的自然变换。

未完成论证，我们必须证明，存在一个子概形$\mathscr H_P\subset G$使得
态射$\varphi:B\to G$以这种方式来源于一个具有Hilbert多项式$P$的平坦族
$\mathscr X\subset \mathbb P_B^n$，当且仅当$\varphi$经由$\mathscr H_P$
分解。这里，我们将满足于描述$\mathscr H_P$，作为$G$的一个闭子概形，的
方程。令$\mathscr Y$为$G$上的万有子丛。我们将有一个乘法映射：
\[
    \operatorname{mult}_{k}: \mathscr{Y} \otimes S_{k} \to S_{k+m},
\]
其中$S=\mathbb Z[X_0,\dots,X_n]$，以及我们可以取$\mathscr H_P$为
$G_{\mathbb Z}(q,M)$的由 
\[
    \operatorname{rank}(\operatorname{mult}_{k}) \leq \dim S_{k+m}-P(m+k)
\]
对所有$k\geq 0$都成立所定义的“行列式”子丛。

瞬间就可以知道，想要的映射$\varphi$都经由该子概形所分解。
给定这个子概形中的任何点$p$，证明（因为$m$可以选得足够大），由$S_m$的
相应线性子空间生成的理想定义了一个具有Hilbert多项式$P$的概形。
这为我们提供了一个具有Hilbert多项式$P$的概形们的$\mathscr H_P$上的
“重言族”。给定概形$B$到$\mathscr H_P$的任何映射，
可以使用纤维积来“拉回”该族得到一个$B$上的族，并且将映射$\varphi$与
该族对应。一旦所有这些都得到验证，对$\mathscr H_P$的点函子的描述就可以
确保$\mathscr H_P$不依赖于$m$的选择。

\paragraph*{Hilbert概形的例子}
\addcontentsline{toc}{subsubsection}{Hilbert概形的例子}
我们将主要以习题的形式来提到一些Hilbert概形的例子。首先，Grassmannian
$\mathbb G_S(k,n)$是一个Hilbert概形：它参数化了射影空间$\mathbb P_S^n$
中维数为$k$且次数为$1$的子概形。下面的习题处理了其中最简单的情况，
一般的命题（和证明）只在数值上有一些改动。

\begin{exe}\label{exe:6.23}
令$P(m)=m+1$为一条直线的Hilbert多项式。证明，$\mathbb P_{\mathbb Z}^3$
中具有Hilbert多项式$P$的子概形的Hilbert概形为在Exercise \ref{exe:6.20}
中所引入的Grassmannian.
\end{exe}

另一个直接的例子是超曲面。这是一个标准的观察，域$K$上射影空间
$\mathbb P_K^n$中次数为$d$的超曲面的集合可以等同于$n+1$个变量下的$d$-次
齐次多项式的集合。实际上，这个射影空间变成了这样的超曲面的Hilbert概形。
同上面的例子，下面的习题处理了一个典型的例子。

% p.265

\begin{exe}\label{exe:6.24}
令$P(m)=2m+1$为一条二次曲线的Hilbert多项式。证明$\mathbb P_{\mathbb Z}^2$
中具有Hilbert多项式$P$的子概形的Hilbert多项式$\mathscr H_P$为
$\mathbb P_{\mathbb Z}^5$.
\end{exe}

这些例子外，Hilbert概形的几何的了解并没有那么多。甚至，参数化了
域上的射影空间$\mathbb P_K^n$中的零维子概形的Hilbert多项式仍然神秘：
比如，Iarrobino [1985] 证明了（除去一些\naive 的例外），
这样的Hilbert概形一般不是不可约的。在$\mathbb P_K^2$的情况，这里
它们实际是不可约且非奇异的，但是它们的整体几何展示了许多问题：
比如可见Collino [1988]. 一个在这里我们可以给出描述的例子是下面的习题。

\begin{exe}\label{exe:6.25}
令$P$是一个常多项式$2$. 证明参数化了$\mathbb P_{\mathbb Z}^2$中具有
Hilbert多项式$P$的子概形的Hilbert多项式$\mathscr H_P$可以通过沿着
对角线爆破$\mathbb P_{\mathbb Z}^2\times \mathbb P_{\mathbb Z}^2$，
然后通过取交换因子的对合的商得到。\nottran
\end{exe}

一般情况中，我们关于Hilbert概形的知识非常少。比如，域$K$上的
射影空间$\mathbb P_K^3$中的曲线的情况，这是参数了纯正维数但不是
超曲面的概形的Hilbert概形的最简单的例子，我们甚至对$\mathscr H_P$
的分支的数量、维数、光滑性或奇异性都没有一个猜测。对这个例子的一个
讨论，见Harris \& Eisenbud [1982].

\paragraph*{Hilbert概形构造的一些变化}
\addcontentsline{toc}{subsubsection}{Hilbert概形构造的一些变化}
我们已经定义了参数化射影空间中具有给定Hilbert多项式$P$的子概形的
Hilbert概形。实际上，无需太多气力，我们就可以大幅推广它。

首先，我们注意到，如果$X\subset \mathbb P_S^n$是任意的闭子概形，我们
可以定义一个函子
\[
    h_{P,X}:(\text{$S$-schemes})^\circ \to (\text{sets})    
\]
将任意的$S$-概形$B$映到$X$中具有Hilbert多项式$P$的子概形族的集合，即
\[
    h_{P,X}(B)=\{\mathscr{X} \subset B \times_{S} X \subset B 
    \times_{S} \mathbb{P}_{S}^{n}=\mathbb{P}_{B}^{n}, 
    \text{ 在$B$上平坦，且具有Hilbert多项式$P$}
    \}.
\]

不难建立的关键事实如下：

\begin{exe}\label{exe:6.26}
证明$h_{P,X}$为$h_P$的一个闭子概形。
\end{exe}

% p.266

从中可知，存在一个闭子概形$\mathscr H_{P,X}\subset \mathscr H_P$其
点函子为$h_{P,X}$，此概形我们称为\emph{$X$的具有Hilbert多项式$P$的子
概形的Hilbert概形}。

作为一个重要的例子，如果我们取$P(m)={{k+m}\choose k}$为一个$k$-平面的
Hilbert多项式，我们将在下面的第 \ref{s:6.2.3} 节中看到，得到的概形
$\mathscr H_{P,X}$即$X$上$k$-平面的Fano概形，其定义在第 \ref{s:4.3} 节。 
这也不是一个空洞的观察：除了给出更自然的定义之外，Fano概形的这种刻画
将使我们能够确定它们的切空间。

\nottran


\subsection{用点函子表示的切空间}\label{s:6.2.3}
\subsection{模空间}\label{s:6.2.4}
